# 15. 纹理的颜色空间

![线性空间与sRGB空间](./img/class15/线性空间与sRGB空间.png)

- linear: 线性空间.按发射光强度均匀分布的灰度条.如上图示,在灰度值0.5处,实际上光强是18%,而非50%
- sRGB: 标准RGB颜色空间.在感知光强度方面均匀分布的灰度条,或者也可以认为是按人眼感知均匀分布的灰度条.如上图示,在灰度值0.5处,光强是50%

png/jpg类型的图片,在存储时,就是按照sRGB空间存储的.如果直接将其作为线性空间纹理使用,会导致渲染结果偏暗.因此,对纹理也要设置色彩空间.

```javascript
// 创建纹理加载器
const textureLoader = new THREE.TextureLoader()
const texture = textureLoader.load('../assets/CityNewYork002_COL_VAR1_1K.png')
// 设置纹理的颜色空间为sRGB
texture.colorSpace = THREE.SRGBColorSpace
console.log(texture)
```

![对纹理设置了sRGB色彩空间后的效果](./img/class15/对纹理设置了sRGB色彩空间后的效果.png)

![纹理的色彩空间属性](./img/class15/纹理的色彩空间属性.png)

该属性默认值为空字符串,表示不使用任何色彩空间.但其实不使用任何色彩空间,默认也是linear色彩空间.当设置为THREE.SRGBColorSpace时,表示使用sRGB色彩空间.

需要注意的一点是: 纹理的色彩空间属性发生改变后,直接赋值是不会立即生效的,需要设置纹理的`texture.needsUpdate`属性值为`true`才能生效:

```javascript
// 改变纹理的色彩空间
const colorSpaceParam = {
    sRGB: THREE.SRGBColorSpace,
    Linear: THREE.LinearSRGBColorSpace,
}
gui.add(texture, 'colorSpace', colorSpaceParam).name('改变纹理色彩空间').onChange(colorSpaceChange)

function colorSpaceChange() {
    // 需要将needsUpdate属性更新为true才能更新
    texture.needsUpdate = true
}
```