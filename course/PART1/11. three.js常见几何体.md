# 11. `three.js`常见几何体

## 1. 立方缓冲几何体

这里主要讲:

- `widthSegments`
- `heightSegments`
- `depthSegments`

这3个参数.这3个参数用于定义几何体在宽/高/深方向上的分段数.分段数越多,几何体就越平滑,但也会增加计算量,影响性能

```javascript
let geometry = new THREE.BoxGeometry(1, 1, 1, 1, 1, 1)
const material = new THREE.MeshBasicMaterial({ color: 0x00ff00 })
material.wireframe = true
const cube = new THREE.Mesh(geometry, material)
scene.add(cube)

// 创建GUI
const gui = new GUI()

gui.add(geometry.parameters, 'widthSegments', 1, 20).step(1).name('宽度分段数').onChange((value) => {
    const newGeometry = new THREE.BoxGeometry(1, 1, 1, value, geometry.parameters.heightSegments, geometry.parameters.depthSegments)

    // 释放旧的几何体并替换
    cube.geometry.dispose()
    cube.geometry = newGeometry
    geometry = newGeometry
})
```

![X轴方向上的三角形变多了](./img/class11/X轴方向上的三角形变多了.png)

Y轴和Z轴也是同理

## 2. 圆形缓冲几何体

```javascript
// radius: 半径
// segments: 分段数 对于圆形来讲 分段数越多则越圆润
// thetaStart: 起始弧度
// thetaLength: 终止弧度
let geometry = new THREE.CircleGeometry(2, 32, 0, Math.PI * 2)
const material = new THREE.MeshBasicMaterial({ color: 0x00ff00, side: THREE.DoubleSide, wireframe: true })
const circle = new THREE.Mesh(geometry, material)
scene.add(circle)

// 创建GUI
const gui = new GUI()

gui.add(geometry.parameters, 'segments').min(1).max(128).step(1).name('多边形数量').onChange((value) => {
    const newGeometry = new THREE.CircleGeometry(2, value, 0, Math.PI * 2)

    // 释放旧的几何体并替换
    circle.geometry.dispose()
    circle.geometry = newGeometry
    geometry = newGeometry
})
```

![圆形的分段数](./img/class11/圆形的分段数.png)

## 3. 圆锥缓冲几何体

```javascript
// radius: 半径
// height: 高度
// radialSegments: 圆周分段数
// heightSegments: 高度分段数
// openEnded: 是否开口
// thetaStart: 起始弧度
// thetaLength: 旋转弧度
let geometry = new THREE.ConeGeometry(1, 2, 32, 1, false, 0, Math.PI * 2)
const material = new THREE.MeshBasicMaterial({ color: 0xffff00, wireframe: true, side: THREE.DoubleSide })
const cone = new THREE.Mesh(geometry, material)
scene.add(cone)

// 创建GUI
const gui = new GUI()

gui.add(geometry.parameters, 'radialSegments').min(1).max(128).step(1).name('圆的多边形数量').onChange((value) => {
    let newGeometry = new THREE.ConeGeometry(1, 2, value, geometry.parameters.heightSegments, geometry.parameters.openEnded, 0, Math.PI * 2)

    // 释放旧的几何体并替换
    cone.geometry.dispose()
    cone.geometry = newGeometry
    geometry = newGeometry
})

gui.add(geometry.parameters, 'heightSegments').min(1).max(128).step(1).name('高的多边形数量').onChange((value) => {
    let newGeometry = new THREE.ConeGeometry(1, 2, geometry.parameters.radialSegments, value, geometry.parameters.openEnded, 0, Math.PI * 2)

    // 释放旧的几何体并替换
    cone.geometry.dispose()
    cone.geometry = newGeometry
    geometry = newGeometry
})

gui.add(geometry.parameters, 'openEnded').name('是否开口').onChange((value) => {
    let newGeometry = new THREE.ConeGeometry(1, 2, geometry.parameters.radialSegments, geometry.parameters.heightSegments, value, 0, Math.PI * 2)

    // 释放旧的几何体并替换
    cone.geometry.dispose()
    cone.geometry = newGeometry
    geometry = newGeometry
})
```

![圆锥的圆分段数和高分段数以及是否开口](./img/class11/圆锥的圆分段数和高分段数以及是否开口.png)
